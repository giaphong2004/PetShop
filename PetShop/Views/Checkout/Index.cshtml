@model IEnumerable<WebsiteBanHang.Models.CartItem>
@{
    ViewBag.Title = "Thanh toán";
    decimal tongTien = Model?.Sum(item => item.SanPham.GiaSP * item.soLuong) ?? 0;
}

@section Styles {
    <link rel="stylesheet" href="~/Content/css/chekout.css">
}


    <div class="container my-5">
        <div class="text-center mb-5">
            <h1 class="display-5 fw-bold">Nhập thông tin giao hàng</h1>
            <p class="text-muted">Vui lòng kiểm tra thông tin giao hàng và chi tiết đơn hàng của bạn.</p>
        </div>

        <div class="row g-4">
            <!-- Cột bên trái: Form nhập thông tin -->
            <div class="col-lg-7">
                <div class="card shadow-sm p-4 form-card">
                    <h4><i class="fas fa-shipping-fast me-2"></i>Thông tin giao hàng</h4>
                    @using (Html.BeginForm("PlaceOrder", "Checkout", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                        <div class="form-floating mb-3">
                            <input type="text" id="TenKH" name="TenKH" class="form-control" placeholder="Họ và Tên" required />
                            <label for="TenKH">Họ và Tên</label>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="tel" id="SDT" name="SDT" class="form-control" placeholder="Số điện thoại" required />
                                    <label for="SDT">Số điện thoại</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating mb-3">
                                    <input type="email" id="Email" name="Email" class="form-control" placeholder="Email (không bắt buộc)" />
                                    <label for="Email">Email (không bắt buộc)</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-floating mb-3">
                            <textarea id="DiaChi" name="DiaChi" class="form-control" placeholder="Địa chỉ nhận hàng" style="height: 100px" required></textarea>
                            <label for="DiaChi">Địa chỉ nhận hàng</label>
                        </div>
                        <div class="d-grid mt-4">
                            <button type="submit" class="btn btn-primary btn-lg fw-bold">
                                <i class="fas fa-lock me-2"></i>XÁC NHẬN ĐẶT HÀNG
                            </button>
                        </div>
                    }
                </div>
            </div>

            <!-- Cột bên phải: Tóm tắt đơn hàng -->
            <div class="col-lg-5">
                <div class="card shadow-sm p-4 summary-card">
                    <h4><i class="fas fa-receipt me-2"></i>Tóm tắt đơn hàng</h4>

                    <ul class="list-group list-group-flush">
                        @foreach (var item in Model)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                                <div class="d-flex align-items-center">
                                    <img src="@Url.Content("~/Content/img/" + item.SanPham.Img)" alt="@item.SanPham.TenSP" class="product-thumbnail me-3" />
                                    <div>
                                        <div class="fw-bold">@item.SanPham.TenSP</div>
                                        <small class="text-muted">Số lượng: @item.soLuong</small>
                                    </div>
                                </div>
                            </li>
                        }
                    </ul>


                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                            <span>Tạm tính</span>
                            <span class="fw-medium">@tongTien.ToString("N0")đ</span>
                        </li>

                        <li class="list-group-item d-flex justify-content-between align-items-center px-0 fs-5 fw-bold border-0">
                            <span>Tổng cộng</span>
                            <span class="text-danger">@tongTien.ToString("N0")đ</span>
                        </li>
                    </ul>

                </div>
            </div>
        </div>
    </div>


