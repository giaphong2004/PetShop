@using WebsiteBanHang.Models;

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

@{
    if (Session["CartSession"] != null)
    {
        <div class="untree_co-section">
            <div class="container">
                <div class="row mb-5">
                    <div class="col-md-12">
                        <div class="border p-4 rounded" role="alert">
                            Returning customer? <a href="#">Click here</a> to login
                        </div>
                    </div>
                </div>
                @using (Html.BeginForm("ProcessOrder", "ShoppingCart", FormMethod.Post, new { Id = "customer-form" }))
                {
                    <div class="row">
                        <div class="col-md-6 mb-5 mb-md-0">
                            <h2 class="h3 mb-3 text-black">Billing Details</h2>
                            <div class="p-3 p-lg-5 border bg-white">
                                <div class="form-group row">
                                    <div class="col-md-12">
                                        <label for="c_fname" class="text-black">Name <span class="text-danger">*</span></label>
                                        <input type="text"
                                               class="form-control"
                                               id="c_fname"
                                               name="cusName" />
                                    </div>

                                </div>
                                <div class="form-group row">
                                    <div class="col-md-12">
                                        <label for="c_address" class="text-black">Address <span class="text-danger">*</span></label>
                                        <input type="text"
                                               class="form-control"
                                               id="c_address"
                                               name="cusAddress"
                                               placeholder="Street address" />
                                    </div>
                                </div>
                                <div class="form-group row mb-5">
                                    <div class="col-md-6">
                                        <label for="c_email_address" class="text-black">Email Address <span class="text-danger">*</span></label>
                                        <input type="text"
                                               class="form-control"
                                               id="c_email_address"
                                               name="cusEmail" />
                                    </div>
                                    <div class="col-md-6">
                                        <label for="c_phone" class="text-black">Phone <span class="text-danger">*</span></label>
                                        <input type="text"
                                               class="form-control"
                                               id="c_phone"
                                               name="cusPhone"
                                               placeholder="Phone Number" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="c_order_notes" class="text-black">Order Notes</label>
                                    <textarea name="c_order_notes"
                                              id="c_order_notes"
                                              cols="30"
                                              rows="5"
                                              class="form-control"
                                              placeholder="Write your notes here..."></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row mb-5">
                                <div class="col-md-12">
                                    <h2 class="h3 mb-3 text-black">Your Order</h2>
                                    <div class="p-3 p-lg-5 border bg-white">
                                        <table class="table site-block-order-table mb-5">
                                            <thead>
                                            <th>Product</th>
                                            <th>Total</th>
                                            </thead>
                                            @foreach (var item in (List<CartItem>)Session["CartSession"])
                                            {
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            @item.Product.TenSP <strong class="mx-2">x</strong> @item.Quantity
                                                        </td>
                                                        <td>@item.Product.GiaSP</td>
                                                    </tr>
                                                </tbody>
                                            }
                                        </table>

                                        <div class="border p-3 mb-3">
                                            <h3 class="h6 mb-0">
                                                <a class="d-block"
                                                   data-bs-toggle="collapse"
                                                   href="#collapsecheque"
                                                   role="button"
                                                   aria-expanded="false"
                                                   aria-controls="collapsecheque">Cheque Payment</a>
                                            </h3>

                                            <div class="collapse" id="collapsecheque">
                                                <div class="py-2">
                                                    <p class="mb-0">
                                                        Make your payment directly into our bank account.
                                                        Please use your Order ID as the payment reference.
                                                        Your order won’t be shipped until the funds have
                                                        cleared in our account.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div style="margin-top:10px" class="form-group">
                                            <a style="margin-top:10px" class="btn btn-black btn-lg py-3 btn-block" type="text" value="Process Order" href="@Url.Action("succes","Shoppingcart/succes")">Process Order</a>
                                            @*<a href="@Html.ActionLink("process order","success","shoppingcart")"></a>
                                                <input class="btn btn-black btn-lg py-3 btn-block" type="text" value="Process Order" />*@

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

    }
    else
    {
        <div>
            <div class="hero">
                <div class="container">
                    <div class="row justify-content-between">
                        <div class="col-lg-12">
                            <div class="intro-excerpt">
                                <h4 style="color:white">Không có sản phẩm nào</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding: 50px">
                <div class="col-md-6">

                    <div class="row mb-5">
                        <div class="col-md-3">

                        </div>
                        <div class="col-md-6 ">
                            <a class="btn btn-outline-black btn-sm btn-block" @Html.ActionLink("Quay lại cửa hàng", "index", "Home")
                        </div>
                        <div class="col-md-3">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
}
<script type="text/javascript">
    $("#customer-form").validate({
        rules: {
            cusName: {
                required: true
            },
            cusPhone: {
                required: true
            },
            cusEmail: {
                required: true
            },
            cusAddress: {
                required: true
            },
        }
    });
</script>
